<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ship Behavior System Demo | SPACE CAPITAL</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Orbitron:wght@500;700&display=swap">
  <link rel="stylesheet" href="css/ship-states.css">
  <style>
    :root {
      --phosphor: #33ff99;
      --phosphor-dim: rgba(51, 255, 153, 0.3);
      --phosphor-glow: rgba(51, 255, 153, 0.4);
      --amber: #ffb347;
      --bg-deep: #050608;
      --bg-panel: #0a0c0f;
      --border: #1a1f2a;
      --text: #e0e0e0;
      --text-muted: #888;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'IBM Plex Mono', monospace;
      background: var(--bg-deep);
      color: var(--text);
      min-height: 100vh;
      padding: 2rem;
    }
    
    h1 {
      font-family: 'Orbitron', monospace;
      color: var(--phosphor);
      font-size: 1.5rem;
      margin-bottom: 1rem;
      letter-spacing: 0.1em;
    }
    
    h2 {
      font-size: 0.9rem;
      color: var(--phosphor);
      margin: 1.5rem 0 1rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .demo-intro {
      background: var(--bg-panel);
      border: 1px solid var(--border);
      padding: 1rem;
      border-radius: 4px;
      margin-bottom: 2rem;
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .demo-card {
      background: var(--bg-panel);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 1rem;
      text-align: center;
    }
    
    .demo-card h3 {
      font-size: 0.7rem;
      color: var(--phosphor);
      margin-bottom: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .demo-ship {
      width: 80px;
      height: 80px;
      margin: 0 auto 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .demo-ship img {
      width: 64px;
      height: 64px;
      image-rendering: pixelated;
      object-fit: contain;
    }
    
    .demo-description {
      font-size: 0.65rem;
      color: var(--text-muted);
      line-height: 1.4;
    }
    
    .controls-section {
      background: var(--bg-panel);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .control-row {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .control-row label {
      width: 120px;
      font-size: 0.75rem;
      color: var(--text-muted);
    }
    
    .control-row input[type="range"] {
      flex: 1;
      max-width: 300px;
    }
    
    .control-row .value {
      width: 80px;
      font-size: 0.75rem;
      color: var(--phosphor);
      text-align: right;
    }
    
    .interactive-demo {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }
    
    .preview-ship {
      width: 200px;
      height: 200px;
      background: 
        linear-gradient(45deg, #0a0a0a 25%, transparent 25%),
        linear-gradient(-45deg, #0a0a0a 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #0a0a0a 75%),
        linear-gradient(-45deg, transparent 75%, #0a0a0a 75%);
      background-size: 16px 16px;
      background-position: 0 0, 0 8px, 8px -8px, -8px 0px;
      background-color: #151515;
      border: 2px solid var(--border);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .preview-ship img {
      width: 128px;
      height: 128px;
      image-rendering: pixelated;
      object-fit: contain;
    }
    
    .preview-info {
      flex: 1;
      min-width: 300px;
    }
    
    .preview-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
    }
    
    .preview-stat {
      background: rgba(0, 0, 0, 0.3);
      padding: 0.5rem;
      border-radius: 4px;
    }
    
    .preview-stat-label {
      font-size: 0.6rem;
      color: var(--text-muted);
      text-transform: uppercase;
      margin-bottom: 0.25rem;
    }
    
    .preview-stat-value {
      font-size: 0.85rem;
      color: var(--phosphor);
    }
    
    .class-demos {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
    }
    
    .class-card {
      background: var(--bg-panel);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 0.75rem;
      text-align: center;
    }
    
    .class-card h4 {
      font-size: 0.65rem;
      color: var(--phosphor);
      margin-bottom: 0.5rem;
      text-transform: uppercase;
    }
    
    .class-ship {
      width: 64px;
      height: 64px;
      margin: 0 auto 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .class-ship img {
      width: 48px;
      height: 48px;
      image-rendering: pixelated;
    }
    
    .class-description {
      font-size: 0.6rem;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <h1>ðŸš€ SHIP BEHAVIOR SYSTEM</h1>
    
    <div class="demo-intro">
      <p>Ships now PERFORM, not just display. This system transforms static sprites into live instruments that react to real-time portfolio data.</p>
    </div>
    
    <!-- Interactive Demo -->
    <h2>Interactive Demo</h2>
    <div class="controls-section">
      <div class="interactive-demo">
        <div class="preview-ship">
          <img id="preview-img" src="assets/ships/animated/RKLB/RKLB_base.png" 
               onerror="this.src='assets/ships/static/RKLB-flagship-ship.png'" 
               alt="Preview Ship">
        </div>
        <div class="preview-info">
          <div class="control-row">
            <label>P&L %</label>
            <input type="range" id="pnl-slider" min="-10" max="10" value="0" step="0.5">
            <span class="value" id="pnl-value">0%</span>
          </div>
          <div class="control-row">
            <label>Volatility</label>
            <input type="range" id="vol-slider" min="0" max="10" value="2" step="0.5">
            <span class="value" id="vol-value">2%</span>
          </div>
          <div class="control-row">
            <label>Hull Integrity</label>
            <input type="range" id="hull-slider" min="0" max="100" value="85" step="5">
            <span class="value" id="hull-value">85%</span>
          </div>
          <div class="control-row">
            <label>Fuel Reserves</label>
            <input type="range" id="fuel-slider" min="0" max="100" value="75" step="5">
            <span class="value" id="fuel-value">75%</span>
          </div>
          
          <h3 style="margin: 1rem 0 0.5rem; font-size: 0.7rem; color: var(--text-muted);">Current State</h3>
          <div class="preview-stats">
            <div class="preview-stat">
              <div class="preview-stat-label">Thrust</div>
              <div class="preview-stat-value" id="thrust-state">Neutral</div>
            </div>
            <div class="preview-stat">
              <div class="preview-stat-label">Stability</div>
              <div class="preview-stat-value" id="stability-state">Stable</div>
            </div>
            <div class="preview-stat">
              <div class="preview-stat-label">Hull</div>
              <div class="preview-stat-value" id="hull-state">Optimal</div>
            </div>
            <div class="preview-stat">
              <div class="preview-stat-label">Mood</div>
              <div class="preview-stat-value" id="mood-state">Neutral</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- P&L Behaviors -->
    <h2>P&L â†’ Thrust Behaviors</h2>
    <div class="demo-grid">
      <div class="demo-card">
        <h3>Strong Positive (+5%+)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/RKLB/RKLB_base.png" 
               onerror="this.src='assets/ships/static/RKLB-flagship-ship.png'"
               class="ship-behavior thrust-strong">
        </div>
        <div class="demo-description">Full thrust forward, intense engine glow</div>
      </div>
      <div class="demo-card">
        <h3>Positive (0-5%)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/JOBY/JOBY_base.png"
               onerror="this.src='assets/ships/static/JOBY-eVTOL-light-class-ship.png'"
               class="ship-behavior thrust-positive">
        </div>
        <div class="demo-description">Gentle thrust, moderate glow</div>
      </div>
      <div class="demo-card">
        <h3>Negative (-2% to -5%)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/LUNR/LUNR_base.png"
               onerror="this.src='assets/ships/static/LUNR-lander-ship.png'"
               class="ship-behavior thrust-negative">
        </div>
        <div class="demo-description">Backward drift, dimmer engines</div>
      </div>
      <div class="demo-card">
        <h3>Failing (-5%+)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/GME/GME_base.png"
               onerror="this.src='assets/ships/static/GME-moonshot-ship.png'"
               class="ship-behavior thrust-failing">
        </div>
        <div class="demo-description">Flickering, heavy backward drift</div>
      </div>
    </div>
    
    <!-- Volatility -->
    <h2>Volatility â†’ Stability</h2>
    <div class="demo-grid">
      <div class="demo-card">
        <h3>Stable</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/ASTS/ASTS_base.png"
               onerror="this.src='assets/ships/static/ASTS-Communications-Relay-Ship.png'"
               class="ship-behavior">
        </div>
        <div class="demo-description">No volatility effects</div>
      </div>
      <div class="demo-card">
        <h3>Elevated (3%+)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/ACHR/ACHR_base.png"
               onerror="this.src='assets/ships/static/ACHR-eVTOL-ship.png'"
               class="ship-behavior volatile-elevated">
        </div>
        <div class="demo-description">Subtle vibration</div>
      </div>
      <div class="demo-card">
        <h3>High (5%+)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/BKSY/BKSY_base.png"
               onerror="this.src='assets/ships/static/BKSY-recon-ship.png'"
               class="ship-behavior volatile-high">
        </div>
        <div class="demo-description">Noticeable shake</div>
      </div>
      <div class="demo-card">
        <h3>Extreme (8%+)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/GME/GME_base.png"
               onerror="this.src='assets/ships/static/GME-moonshot-ship.png'"
               class="ship-behavior volatile-extreme">
        </div>
        <div class="demo-description">Violent shaking</div>
      </div>
    </div>
    
    <!-- Hull States -->
    <h2>Hull â†’ Damage State</h2>
    <div class="demo-grid">
      <div class="demo-card">
        <h3>Optimal (80%+)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/RKLB/RKLB_base.png"
               onerror="this.src='assets/ships/static/RKLB-flagship-ship.png'"
               class="ship-behavior hull-optimal">
        </div>
        <div class="demo-description">Clean, no effects</div>
      </div>
      <div class="demo-card">
        <h3>Stressed (50-79%)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/RDW/RDW_base.png"
               onerror="this.src='assets/ships/static/RDW-Hauler-ship.png'"
               class="ship-behavior hull-stressed">
        </div>
        <div class="demo-description">Warning amber tint</div>
      </div>
      <div class="demo-card">
        <h3>Critical (25-49%)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/KTOS/KTOS_base.png"
               onerror="this.src='assets/ships/static/KTOS-Fighter-Ship.png'"
               class="ship-behavior hull-critical">
        </div>
        <div class="demo-description">Red tint, damage pulse</div>
      </div>
      <div class="demo-card">
        <h3>Failing (0-24%)</h3>
        <div class="demo-ship">
          <img src="assets/ships/animated/LHX/LHX_base.png"
               onerror="this.src='assets/ships/static/LHX-Drone-ship.png'"
               class="ship-behavior hull-failing">
        </div>
        <div class="demo-description">Flashing, critical state</div>
      </div>
    </div>
    
    <!-- Class-Specific Idle -->
    <h2>Class-Specific Idle Behaviors</h2>
    <div class="class-demos">
      <div class="class-card">
        <h4>Flagship</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/RKLB/RKLB_base.png"
               onerror="this.src='assets/ships/static/RKLB-flagship-ship.png'"
               class="ship-behavior idle-commanding has-command-radius">
        </div>
        <div class="class-description">Commanding presence</div>
      </div>
      <div class="class-card">
        <h4>Carrier</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/GE/GE_base.png"
               onerror="this.src='assets/ships/static/GE-Stealth-Bomber-ship.png'"
               class="ship-behavior idle-stable">
        </div>
        <div class="class-description">Stable platform</div>
      </div>
      <div class="class-card">
        <h4>Drone</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/LHX/LHX_base.png"
               onerror="this.src='assets/ships/static/LHX-Drone-ship.png'"
               class="ship-behavior idle-nervous has-radar-sweep">
        </div>
        <div class="class-description">Rapid micro-movements</div>
      </div>
      <div class="class-card">
        <h4>Lander</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/LUNR/LUNR_base.png"
               onerror="this.src='assets/ships/static/LUNR-lander-ship.png'"
               class="ship-behavior idle-heavy has-vertical-bias">
        </div>
        <div class="class-description">Heavy inertia</div>
      </div>
      <div class="class-card">
        <h4>Scout</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/PL/PL_base.png"
               onerror="this.src='assets/ships/static/PL-scout-ship.png'"
               class="ship-behavior idle-alert has-radar-sweep">
        </div>
        <div class="class-description">Quick scanning</div>
      </div>
      <div class="class-card">
        <h4>eVTOL</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/JOBY/JOBY_base.png"
               onerror="this.src='assets/ships/static/JOBY-eVTOL-light-class-ship.png'"
               class="ship-behavior idle-hovering has-rotor-wash">
        </div>
        <div class="class-description">Vertical bob</div>
      </div>
      <div class="class-card">
        <h4>Fighter</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/KTOS/KTOS_base.png"
               onerror="this.src='assets/ships/static/KTOS-Fighter-Ship.png'"
               class="ship-behavior idle-aggressive has-weapon-glow">
        </div>
        <div class="class-description">Ready stance</div>
      </div>
      <div class="class-card">
        <h4>Moonshot</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/GME/GME_base.png"
               onerror="this.src='assets/ships/static/GME-moonshot-ship.png'"
               class="ship-behavior idle-volatile">
        </div>
        <div class="class-description">Unpredictable energy</div>
      </div>
      <div class="class-card">
        <h4>Relay</h4>
        <div class="class-ship">
          <img src="assets/ships/animated/ASTS/ASTS_base.png"
               onerror="this.src='assets/ships/static/ASTS-Communications-Relay-Ship.png'"
               class="ship-behavior idle-stable has-signal-pulse">
        </div>
        <div class="class-description">Signal pulse</div>
      </div>
    </div>
  </div>
  
  <script src="js/ships/ship-behavior.js"></script>
  <script>
    // Interactive Demo
    const previewImg = document.getElementById('preview-img');
    let behaviorController = null;
    
    // Initialize behavior on preview ship
    if (window.ShipBehavior) {
      behaviorController = ShipBehavior.create(previewImg, {
        ticker: 'DEMO',
        shipClass: 'Flagship'
      });
    }
    
    // Slider handlers
    const sliders = {
      pnl: document.getElementById('pnl-slider'),
      vol: document.getElementById('vol-slider'),
      hull: document.getElementById('hull-slider'),
      fuel: document.getElementById('fuel-slider')
    };
    
    const values = {
      pnl: document.getElementById('pnl-value'),
      vol: document.getElementById('vol-value'),
      hull: document.getElementById('hull-value'),
      fuel: document.getElementById('fuel-value')
    };
    
    const states = {
      thrust: document.getElementById('thrust-state'),
      stability: document.getElementById('stability-state'),
      hull: document.getElementById('hull-state'),
      mood: document.getElementById('mood-state')
    };
    
    function updatePreview() {
      const pnl = parseFloat(sliders.pnl.value);
      const vol = parseFloat(sliders.vol.value) / 100;
      const hull = parseFloat(sliders.hull.value);
      const fuel = parseFloat(sliders.fuel.value);
      
      // Update value displays
      values.pnl.textContent = pnl + '%';
      values.vol.textContent = (vol * 100).toFixed(1) + '%';
      values.hull.textContent = hull + '%';
      values.fuel.textContent = fuel + '%';
      
      // Update behavior controller
      if (behaviorController) {
        behaviorController.updateStats({
          pnlPercent: pnl,
          volatility: vol,
          hull: hull,
          fuel: fuel
        });
        
        // Update state displays
        if (pnl >= 5) states.thrust.textContent = 'Strong+';
        else if (pnl > 0) states.thrust.textContent = 'Positive';
        else if (pnl > -5) states.thrust.textContent = 'Negative';
        else states.thrust.textContent = 'Failing';
        
        if (vol >= 0.08) states.stability.textContent = 'Extreme';
        else if (vol >= 0.05) states.stability.textContent = 'High';
        else if (vol >= 0.03) states.stability.textContent = 'Elevated';
        else states.stability.textContent = 'Stable';
        
        if (hull >= 80) states.hull.textContent = 'Optimal';
        else if (hull >= 50) states.hull.textContent = 'Stressed';
        else if (hull >= 25) states.hull.textContent = 'Critical';
        else states.hull.textContent = 'Failing';
        
        states.mood.textContent = behaviorController.mood.charAt(0).toUpperCase() + behaviorController.mood.slice(1);
      }
    }
    
    Object.values(sliders).forEach(slider => {
      slider.addEventListener('input', updatePreview);
    });
    
    // Initial update
    updatePreview();
  </script>
</body>
</html>
