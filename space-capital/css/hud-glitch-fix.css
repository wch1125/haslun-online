/* ═══════════════════════════════════════════════════════════════════════════
   HUD GLITCH FIX — Dangerous but not Obstructive
   
   Inspired by:
   - Hotline Miami: Neon danger, VHS corruption
   - Halo ODST: Minimal targeting HUD, subtle reticle
   - Digimon: Digital glitches, data corruption artifacts
   
   Philosophy: The danger should feel ambient and rare, not constant and thick.
   ═══════════════════════════════════════════════════════════════════════════ */

/* ═══════════════════════════════════════════════════════════════════════════
   1. CABINET FRAME FIX — Reduce thickness, add danger through effects
   ═══════════════════════════════════════════════════════════════════════════ */

/* Override the heavy 3px cabinet frame */
.hangar-rpg::before {
  border: 1px solid rgba(255, 0, 102, 0.4) !important;
  box-shadow:
    0 0 1px rgba(255, 0, 102, 0.6),
    0 0 30px rgba(255, 0, 102, 0.08),
    inset 0 0 80px rgba(255, 0, 102, 0.03) !important;
}

/* Remove the corner bolt decoration */
.hangar-rpg::after {
  display: none !important;
}

/* ═══════════════════════════════════════════════════════════════════════════
   2. ODST-STYLE TARGETING CORNERS — Minimal HUD brackets
   ═══════════════════════════════════════════════════════════════════════════ */

.hangar-center {
  position: relative;
}

.hangar-center::before,
.hangar-center::after {
  content: '';
  position: absolute;
  width: 35px;
  height: 35px;
  pointer-events: none;
  z-index: 100;
  opacity: 0.35;
}

/* Top-left corner bracket */
.hangar-center::before {
  top: 10px;
  left: 10px;
  border-top: 2px solid #ff0066;
  border-left: 2px solid #ff0066;
}

/* Bottom-right corner bracket */
.hangar-center::after {
  bottom: 10px;
  right: 10px;
  border-bottom: 2px solid #ff0066;
  border-right: 2px solid #ff0066;
}

/* Additional corners via ship-showcase pseudo-elements */
.ship-showcase::before {
  content: '';
  position: absolute;
  top: 10px;
  right: 10px;
  width: 35px;
  height: 35px;
  border-top: 2px solid #ff0066;
  border-right: 2px solid #ff0066;
  opacity: 0.35;
  pointer-events: none;
  z-index: 100;
}

/* ═══════════════════════════════════════════════════════════════════════════
   3. CHROMATIC ABERRATION — RGB split on ship ring
   ═══════════════════════════════════════════════════════════════════════════ */

.ship-showcase-ring {
  position: relative;
}

/* Cyan ghost offset */
.ship-showcase-ring::before {
  content: '' !important;
  position: absolute !important;
  inset: -1px 1px 1px -1px !important;
  border: 1px solid rgba(0, 255, 204, 0.15) !important;
  border-radius: 50% !important;
  pointer-events: none !important;
  animation: chromaShiftCyan 8s ease-in-out infinite !important;
}

/* Magenta ghost offset */
.ship-showcase-ring::after {
  content: '' !important;
  position: absolute !important;
  inset: 1px -1px -1px 1px !important;
  border: 1px solid rgba(255, 0, 102, 0.15) !important;
  border-radius: 50% !important;
  pointer-events: none !important;
  animation: chromaShiftMagenta 8s ease-in-out infinite !important;
}

@keyframes chromaShiftCyan {
  0%, 100% { transform: translate(0, 0); opacity: 0.15; }
  25% { transform: translate(-1px, 1px); opacity: 0.25; }
  50% { transform: translate(1px, -1px); opacity: 0.1; }
  75% { transform: translate(-1px, -1px); opacity: 0.2; }
}

@keyframes chromaShiftMagenta {
  0%, 100% { transform: translate(0, 0); opacity: 0.15; }
  25% { transform: translate(1px, -1px); opacity: 0.2; }
  50% { transform: translate(-1px, 1px); opacity: 0.25; }
  75% { transform: translate(1px, 1px); opacity: 0.1; }
}

/* ═══════════════════════════════════════════════════════════════════════════
   4. TRAVELING SCANLINE — Single line sweep effect
   ═══════════════════════════════════════════════════════════════════════════ */

.hangar-rpg {
  position: relative;
  overflow: hidden;
}

/* Override the scanline overlay to be a single traveling line */
.hangar-rpg > .hangar-center::after {
  content: '';
  position: fixed;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(
    180deg,
    transparent,
    rgba(255, 0, 102, 0.08),
    rgba(255, 255, 255, 0.03),
    transparent
  );
  pointer-events: none;
  z-index: 1001;
  animation: travelingScanline 5s linear infinite;
}

@keyframes travelingScanline {
  0% { top: -5px; opacity: 0; }
  5% { opacity: 1; }
  95% { opacity: 1; }
  100% { top: 100vh; opacity: 0; }
}

/* ═══════════════════════════════════════════════════════════════════════════
   5. DIGIMON DATA CORRUPTION — Rare glitch bursts
   ═══════════════════════════════════════════════════════════════════════════ */

/* Ship sprite digital corruption */
.ship-showcase-sprite {
  animation: shipDigiGlitch 12s steps(1) infinite;
}

@keyframes shipDigiGlitch {
  0%, 92% { 
    clip-path: inset(0 0 0 0);
    filter: none;
  }
  93% {
    clip-path: inset(20% 0 30% 0);
    filter: hue-rotate(90deg) saturate(2);
  }
  94% {
    clip-path: inset(0 0 0 0);
    filter: none;
  }
  95% {
    clip-path: inset(60% 0 10% 0);
    filter: brightness(1.5) hue-rotate(-30deg);
  }
  96% {
    clip-path: inset(5% 0 70% 0);
    transform: translateX(3px);
  }
  97% {
    clip-path: inset(0 0 0 0);
    transform: translateX(0);
    filter: none;
  }
  98% {
    clip-path: inset(40% 0 40% 0);
    filter: saturate(0) brightness(2);
  }
  99% {
    clip-path: inset(0 0 0 0);
    filter: none;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   6. HOLOGRAM FLICKER — Ship presence instability
   ═══════════════════════════════════════════════════════════════════════════ */

.ship-showcase-sprite {
  animation: 
    shipDigiGlitch 12s steps(1) infinite,
    holoFlicker 0.15s steps(2) infinite;
}

@keyframes holoFlicker {
  0%, 100% { 
    opacity: 1;
  }
  50% { 
    opacity: 0.92;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   7. TEXT GLITCH — Nameplate corruption
   ═══════════════════════════════════════════════════════════════════════════ */

.ship-nameplate {
  position: relative;
}

.ship-nameplate-ticker {
  position: relative;
  animation: textGlitch 8s steps(1) infinite;
}

/* Cyan text ghost */
.ship-nameplate-ticker::before {
  content: attr(data-ticker);
  position: absolute;
  left: -1px;
  top: 0;
  color: rgba(0, 255, 204, 0.4);
  clip-path: inset(0 0 0 0);
  animation: textGhostCyan 4s steps(1) infinite;
  pointer-events: none;
}

/* Magenta text ghost */
.ship-nameplate-ticker::after {
  content: attr(data-ticker);
  position: absolute;
  left: 1px;
  top: 0;
  color: rgba(255, 0, 102, 0.3);
  clip-path: inset(0 0 0 0);
  animation: textGhostMagenta 4s steps(1) infinite;
  pointer-events: none;
}

@keyframes textGlitch {
  0%, 90% { transform: none; }
  91% { transform: translateX(-2px) skewX(-5deg); }
  92% { transform: translateX(1px) skewX(2deg); }
  93% { transform: none; }
  97% { transform: translateX(1px); }
  98% { transform: translateX(-1px) skewX(-2deg); }
  99% { transform: none; }
}

@keyframes textGhostCyan {
  0%, 85%, 100% { clip-path: inset(0 100% 0 0); opacity: 0; }
  86% { clip-path: inset(0 0 50% 0); opacity: 0.5; }
  88% { clip-path: inset(50% 0 0 0); opacity: 0.3; }
  90% { clip-path: inset(0 100% 0 0); opacity: 0; }
}

@keyframes textGhostMagenta {
  0%, 88%, 100% { clip-path: inset(0 100% 0 0); opacity: 0; }
  89% { clip-path: inset(30% 0 30% 0); opacity: 0.4; }
  91% { clip-path: inset(0 0 60% 0); opacity: 0.3; }
  93% { clip-path: inset(0 100% 0 0); opacity: 0; }
}

/* ═══════════════════════════════════════════════════════════════════════════
   8. NOISE OVERLAY — Ambient static
   ═══════════════════════════════════════════════════════════════════════════ */

.hangar-rpg::after {
  content: '' !important;
  display: block !important;
  position: absolute !important;
  inset: 0 !important;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E") !important;
  opacity: 0.012 !important;
  pointer-events: none !important;
  z-index: 1002 !important;
  mix-blend-mode: overlay !important;
  animation: noiseShift 0.5s steps(10) infinite !important;
  clip-path: none !important;
  width: auto !important;
  height: auto !important;
  border: none !important;
  background-color: transparent !important;
}

@keyframes noiseShift {
  0% { transform: translate(0, 0); }
  10% { transform: translate(-2%, -2%); }
  20% { transform: translate(2%, 1%); }
  30% { transform: translate(-1%, 2%); }
  40% { transform: translate(1%, -1%); }
  50% { transform: translate(-2%, 1%); }
  60% { transform: translate(2%, -2%); }
  70% { transform: translate(-1%, -1%); }
  80% { transform: translate(1%, 2%); }
  90% { transform: translate(0, -2%); }
  100% { transform: translate(0, 0); }
}

/* ═══════════════════════════════════════════════════════════════════════════
   9. WARNING LED INDICATORS — Status dots on stat blocks
   ═══════════════════════════════════════════════════════════════════════════ */

.stat-block {
  position: relative;
}

.stat-block::after {
  content: '';
  position: absolute;
  top: 8px;
  right: 8px;
  width: 4px;
  height: 4px;
  background: #ff0066;
  border-radius: 50%;
  box-shadow: 0 0 4px #ff0066, 0 0 8px rgba(255, 0, 102, 0.5);
  animation: ledBlink 2.5s steps(1) infinite;
}

.stat-block:nth-child(2)::after {
  animation-delay: -0.7s;
}

.stat-block:nth-child(3)::after {
  animation-delay: -1.4s;
}

.stat-block:nth-child(4)::after {
  animation-delay: -2.1s;
}

@keyframes ledBlink {
  0%, 85%, 100% { opacity: 0.6; }
  86% { opacity: 1; box-shadow: 0 0 6px #ff0066, 0 0 12px rgba(255, 0, 102, 0.8); }
  88% { opacity: 0.3; }
  90% { opacity: 1; }
  92% { opacity: 0.5; }
}

/* ═══════════════════════════════════════════════════════════════════════════
   10. HORIZONTAL TEAR — Rare screen tear effect
   ═══════════════════════════════════════════════════════════════════════════ */

.hangar-sidebar {
  position: relative;
  overflow: hidden;
}

.hangar-sidebar::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(0, 255, 204, 0.3),
    rgba(255, 0, 102, 0.5),
    rgba(0, 255, 204, 0.3),
    transparent
  );
  pointer-events: none;
  z-index: 50;
  animation: horizontalTear 15s steps(1) infinite;
  opacity: 0;
}

@keyframes horizontalTear {
  0%, 94%, 100% { 
    opacity: 0;
    top: 20%;
  }
  95% {
    opacity: 1;
    top: 25%;
    transform: translateX(-3px);
  }
  96% {
    opacity: 1;
    top: 55%;
    transform: translateX(2px);
  }
  97% {
    opacity: 0.7;
    top: 75%;
    transform: translateX(-1px);
  }
  98% {
    opacity: 0;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   11. VIGNETTE ENHANCEMENT — Edge danger
   ═══════════════════════════════════════════════════════════════════════════ */

.hangar-rpg {
  box-shadow: 
    inset 0 0 100px rgba(0, 0, 0, 0.5),
    inset 0 0 200px rgba(10, 0, 8, 0.3),
    inset 0 50px 80px -50px rgba(255, 0, 102, 0.05),
    inset 0 -50px 80px -50px rgba(255, 0, 102, 0.05);
}

/* ═══════════════════════════════════════════════════════════════════════════
   12. SIDEBAR EDGE GLOW — Subtle vertical accents
   ═══════════════════════════════════════════════════════════════════════════ */

.hangar-sidebar.left::before {
  content: '';
  position: absolute;
  top: 0;
  right: -10px;
  bottom: 0;
  width: 1px;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(255, 0, 102, 0.2) 20%,
    rgba(255, 0, 102, 0.35) 50%,
    rgba(255, 0, 102, 0.2) 80%,
    transparent 100%
  );
  box-shadow: 0 0 8px rgba(255, 0, 102, 0.15);
  pointer-events: none;
  z-index: 10;
}

.hangar-sidebar.right::before {
  content: '';
  position: absolute;
  top: 0;
  left: -10px;
  bottom: 0;
  width: 1px;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(255, 0, 102, 0.2) 20%,
    rgba(255, 0, 102, 0.35) 50%,
    rgba(255, 0, 102, 0.2) 80%,
    transparent 100%
  );
  box-shadow: 0 0 8px rgba(255, 0, 102, 0.15);
  pointer-events: none;
  z-index: 10;
}

/* ═══════════════════════════════════════════════════════════════════════════
   13. CROSSHAIR PULSE — Center targeting reticle
   ═══════════════════════════════════════════════════════════════════════════ */

.ship-showcase {
  position: relative;
}

/* Pulsing center crosshair */
.ship-showcase::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 60px;
  height: 60px;
  transform: translate(-50%, -50%);
  border: 1px dashed rgba(255, 0, 102, 0.15);
  border-radius: 50%;
  pointer-events: none;
  z-index: 1;
  animation: crosshairPulse 3.5s ease-in-out infinite;
}

@keyframes crosshairPulse {
  0%, 100% { 
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.15;
  }
  50% { 
    transform: translate(-50%, -50%) scale(1.15);
    opacity: 0.3;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   14. BUTTON INTERACTION GLITCH
   ═══════════════════════════════════════════════════════════════════════════ */

.hangar-action-btn:hover,
.color-swatch:hover,
.equipment-slot:hover {
  animation: buttonGlitch 0.15s steps(3);
}

@keyframes buttonGlitch {
  0% { transform: none; filter: none; }
  33% { transform: translateX(-1px) skewX(-2deg); filter: hue-rotate(20deg); }
  66% { transform: translateX(1px) skewX(1deg); filter: hue-rotate(-10deg); }
  100% { transform: none; filter: none; }
}

/* ═══════════════════════════════════════════════════════════════════════════
   15. FLEET GRID CORRUPTION — Subtle grid cell glitches
   ═══════════════════════════════════════════════════════════════════════════ */

.ship-roster-grid .ship-roster-item {
  animation: gridCellGlitch 20s steps(1) infinite;
}

.ship-roster-grid .ship-roster-item:nth-child(odd) {
  animation-delay: -7s;
}

.ship-roster-grid .ship-roster-item:nth-child(3n) {
  animation-delay: -13s;
}

@keyframes gridCellGlitch {
  0%, 97%, 100% {
    filter: none;
    transform: none;
  }
  97.5% {
    filter: brightness(1.3) saturate(0.5);
    transform: translateX(1px);
  }
  98% {
    filter: hue-rotate(180deg);
    transform: translateX(-1px);
  }
  98.5% {
    filter: none;
    transform: none;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   PERFORMANCE & ACCESSIBILITY
   ═══════════════════════════════════════════════════════════════════════════ */

/* Reduced motion - disable all glitch animations */
@media (prefers-reduced-motion: reduce) {
  .ship-showcase-sprite,
  .ship-nameplate-ticker,
  .ship-nameplate-ticker::before,
  .ship-nameplate-ticker::after,
  .stat-block::after,
  .hangar-sidebar::after,
  .ship-showcase::after,
  .ship-showcase-ring::before,
  .ship-showcase-ring::after,
  .hangar-rpg::after,
  .hangar-rpg > .hangar-center::after,
  .ship-roster-grid .ship-roster-item {
    animation: none !important;
  }
  
  .hangar-rpg::after {
    display: none !important;
  }
}

/* Mobile optimizations */
@media (max-width: 768px) {
  /* Simpler targeting corners */
  .hangar-center::before,
  .hangar-center::after {
    width: 20px;
    height: 20px;
  }
  
  .ship-showcase::before {
    width: 20px;
    height: 20px;
  }
  
  /* Disable heavy effects */
  .hangar-rpg::after,
  .hangar-rpg > .hangar-center::after {
    display: none !important;
  }
  
  /* Static indicators instead of animated */
  .stat-block::after {
    animation: none;
    opacity: 0.5;
  }
  
  /* Disable horizontal tears */
  .hangar-sidebar::after {
    display: none;
  }
}

/* Battery saver mode */
.battery-mode .hangar-rpg::after,
.battery-mode .hangar-rpg > .hangar-center::after,
.battery-mode .ship-showcase-sprite,
.battery-mode .stat-block::after,
.battery-mode .hangar-sidebar::after {
  animation: none !important;
}

.battery-mode .hangar-rpg::after {
  display: none !important;
}
